<%- include('../layouts/user/lyHeader.ejs') %>
		<!-- WRAPPER START -->
		<div class="wrapper bg-dark-white">
			<%- include('../layouts/user/sidebarSearch.ejs') %>
			
				<!-- sidebar-search End -->
			<!-- HEADER-AREA START -->
			<%- include('../layouts/user/Header.ejs') %>
			<!-- HEADER-AREA END -->
			<!-- Mobile-menu start -->
			<%- include('../layouts/user/mobile.ejs') %>
			<!-- Mobile-menu end -->
			<!-- HEADING-BANNER START -->
			<div style="display: flex; align-items: center; justify-content: center;"  class="heading-banner-area position-relative  overlay-bg">
			<img  src="/image/back.jpg" class="position-absolute object-fit-cover "  style="width: 99%; height: 100%;object-fit: cover; border-radius: 15px;" alt="">
				<div class="container">
					<div class="row">
						<div class="col-md-12">
							<div class="heading-banner">
								<div class="heading-banner-title">
									<h2>Shop</h2>
								</div>
								<div class="breadcumbs pb-15">
									<ul>
										<li><a href="/">Home</a></li>
										<li>Shop</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- HEADING-BANNER END -->
			<!-- PRODUCT-AREA START -->
			<div class="product-area pt-80 pb-80 product-style-2">
				<div class="container">
					<!-- Shop-Content End -->
					<div class="shop-content">
						<div class="row">
							<div class="col-md-12">
								<div class="product-option mb-30 clearfix">
									<!-- Categories start -->
									<div class="dropdown floatleft">
									
										<div class="dropdown-menu dropdown-width" >
											<!-- Widget-Categories start -->
											<aside class="widget widget-categories">
											
												<div id="cat-treeview"  class="widget-info product-cat boxscrol2">
													<ul>
														<li><span>Chair</span>
															<ul>
																<li><a href="#">T-Shirts</a></li>
																<li><a href="#">Striped Shirts</a></li>
																<li><a href="#">Half Shirts</a></li>
																<li><a href="#">Formal Shirts</a></li>
																<li><a href="#">Bilazers</a></li>
															</ul>
														</li>          
														<li class="open"><span>Furniture</span>
															<ul>
																<li><a href="#">Men Bag</a></li>
																<li><a href="#">Shoes</a></li>
																<li><a href="#">Watch</a></li>
																<li><a href="#">T-shirt</a></li>
																<li><a href="#">Shirt</a></li>
															</ul>
														</li>          
														<li><span>Accessories</span>
															<ul>
																<li><a href="#">T-Shirts</a></li>
																<li><a href="#">Striped Shirts</a></li>
																<li><a href="#">Half Shirts</a></li>
																<li><a href="#">Formal Shirts</a></li>
																<li><a href="#">Bilazers</a></li>
															</ul>
														</li>
														<li><span>Top Brands</span>
															<ul>
																<li><a href="#">T-Shirts</a></li>
																<li><a href="#">Striped Shirts</a></li>
																<li><a href="#">Half Shirts</a></li>
																<li><a href="#">Formal Shirts</a></li>
																<li><a href="#">Bilazers</a></li>
															</ul>
														</li>
														<li><span>Jewelry</span>
															<ul>
																<li><a href="#">T-Shirts</a></li>
																<li><a href="#">Striped Shirts</a></li>
																<li><a href="#">Half Shirts</a></li>
																<li><a href="#">Formal Shirts</a></li>
																<li><a href="#">Bilazers</a></li>
															</ul>
														</li>
													</ul>
												</div>
											</aside>
											<!-- Widget-categories end -->
										</div>
									</div>	
									<!-- Categories end -->
									<!-- Price start -->
									<div class="dropdown floatleft">
										<button class="option-btn" >
										Price
										</button>
										<div class="dropdown-menu dropdown-width" >
											<!-- Shop-Filter start -->
											<aside class="widget shop-filter">
												<div class="widget-title">
													<h4>Price</h4>
												</div>
												<div class="widget-info">
													<a href="/filter/HighToLow">High to Low</a>
													<br>
													<a href="/filter/LowToHigh">Low to High</a>
													<br>
													<a href="/filter/Alphabetic">Alphabetic Order</a>
													<br>
													<a href="/filter/AlphabeticLow">Alphabetic</a>
												</div>
											</aside>
											<!-- Shop-Filter end -->
										</div>
									</div>	
									<!-- Price end -->
									<!-- Color start -->
									<div class="dropdown floatleft">
										<button class="option-btn">
										Category
										</button>
										<div class="dropdown-menu dropdown-width" >
											<!-- Widget-Color start -->
											<aside class="widget widget-color">
												<div class="widget-title">
													<h4>Category</h4>
												</div>
												<div class="widget-info color-filter clearfix">
													<a href="/type/MEN">MEN</a>
													<br>
													<a href="/type/WOMEN">WOMEN</a>
												</div>
											</aside>
											<!-- Widget-Color end -->
										</div>
									</div>
									<!-- Color end -->
									<!-- Size start -->
									<div class="">
										<a href="/shop"><button class="option-btn">Reset</button></a>
								
									</div>	
									<!-- Size end -->								
								
								</div>						
							</div>	
							<div class="col-md-12">
								<div class="row">
									<!-- Single-product start -->
								
									<% shopProducts.forEach((data)=>{ %>
										
									<div  style="border-radius: 15px;" class="col-xl-3 col-lg-4 col-md-6">
										<div  style="border-radius: 15px;" class="single-product">
											<div  style="border-radius: 15px;" class="product-img">
												<div class="d-flex" style="gap: 1rem;">
											
													
												</div>
												
												<% if(data.quantity==0){ %>
													<span class="pro-label new-label">Sold Out</span>
												  <% } %>
												<a href="/product?id=<%=data._id %>"><img  style="border-radius: 15px;" src="/ImageData/<%=data.image[0] %>" alt="" /></a>
											</div>
											<div  style="border-radius: 15px;" class="product-info clearfix text-center">
												<div class="fix">
													<h4 class="post-title"><a href="#"><%=data.name %></a></h4>
													
												</div>
												
												<div class="fix">
													<% if(data.offer>0){ %>
														<span class=" text-decoration-line-through">₹<%= data.price %>.00</span>
														<span >₹<%=data.offerPrire %>.00</span>
														<% }else{ %>
															<span class="">₹<%= data.price %>.00</span>
															<% } %>
													
										
												</div>
												<div  style="border-radius: 15px;" class="product-action clearfix justify-content-center d-flex ">
													<% if(locals.user_id){ %>
													<a onclick="Wishlist('<%=data._id%>',this)" data-bs-toggle="tooltip" data-placement="top" title="Wishlist"> <i class="<%= !locals.wish ? 'ri-heart-3-line' : (locals.wish.products.find(e => e.productId.toString() == data._id.toString()) ? 'ri-heart-3-fill' : 'ri-heart-3-line') %>" style="cursor: pointer;"></i></a>
	
													<% if(!data.quantity==0){ %>
													<a onclick="addcart('<%=data._id%>')" data-bs-toggle="tooltip" data-placement="top" title="Add To Cart"><i class="zmdi zmdi-shopping-cart-plus" style="cursor: pointer;"></i></a>
													
													<% }else{ %>
														<a data-bs-toggle="tooltip" data-placement="top" title="Add To Cart"><i di  class="zmdi zmdi-shopping-cart-plus" style="cursor: pointer;"></i></a>
														<% } %>
														<% }else{ %>
															<a href="/login" data-bs-toggle="tooltip" data-placement="top" title="Wishlist"> <i class="<%= !locals.wish ? 'ri-heart-3-line' : (locals.wish.products.find(e => e.productId.toString() == data._id.toString()) ? 'ri-heart-3-fill' : 'ri-heart-3-line') %>" style="cursor: pointer;"></i></a>
	
															<a href="/login" data-bs-toggle="tooltip" data-placement="top" title="Add To Cart"><i di  class="zmdi zmdi-shopping-cart-plus" style="cursor: pointer;"></i></a>
															<% } %>
												</div>
											</div>
											
										</div>
									</div>
									<% }) %>
									
							
										
								</div>
							</div>
							<div class="col-md-12">
								<!-- Pagination start -->
								<div class="shop-pagination  text-center bg-white ">
									<div class="pagination">
										<!-- <ul>
											<li><a href="#"><i class="zmdi zmdi-long-arrow-left"></i></a></li>
											<li><a href="#">01</a></li>
											<li><a class="active" href="#">02</a></li>
											<li><a href="#">03</a></li>
											<li><a href="#">04</a></li>
											<li><a href="#">05</a></li>
											<li><a href="#"><i class="zmdi zmdi-long-arrow-right"></i></a></li>
										</ul> -->

										<%- include('../layouts/page.ejs') %>

									</div>
								</div>
								<!-- Pagination end -->
							</div>
						</div>
					</div>
					<!-- Shop-Content End -->
				</div>
			</div>
			<!-- PRODUCT-AREA END -->
			<!-- FOOTER START -->
			<%- include('../layouts/user/Footer.ejs') %>
			<!-- FOOTER END -->
			<!-- QUICKVIEW PRODUCT -->
			<div id="quickview-wrapper">
			   <!-- Modal -->
			   <div class="modal fade" id="productModal" tabindex="-1" role="dialog">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-bs-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							</div>
							<div class="modal-body">
								<div class="modal-product">
									<div class="product-images">
										<div class="main-image images">
											<img alt="#" src="img/product/quickview-photo.jpg"/>
										</div>
									</div><!-- .product-images -->

									<div class="product-info">
										<h1>Aenean eu tristique</h1>
										<div class="price-box-3">
											<hr />
											<div class="s-price-box">
												<span class="new-price">$160.00</span>
												<span class="old-price">$190.00</span>
											</div>
											<hr />
										</div>
										<a href="shop.html" class="see-all">See all features</a>
										<div class="quick-add-to-cart">
											<form method="post" class="cart">
												<div class="numbers-row">
													<input type="number" id="french-hens" value="3" min="1">
												</div>
												<button class="single_add_to_cart_button" type="submit">Add to cart</button>
											</form>
										</div>
										<div class="quick-desc">
											Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam fringilla augue nec est tristique auctor. Donec non est at libero.
										</div>
										<div class="social-sharing">
											<div class="widget widget_socialsharing_widget">
												<h3 class="widget-title-modal">Share this product</h3>
												<ul class="social-icons">
													<li><a target="_blank" title="Google +" href="#" class="gplus social-icon"><i class="zmdi zmdi-google-plus"></i></a></li>
													<li><a target="_blank" title="Twitter" href="#" class="twitter social-icon"><i class="zmdi zmdi-twitter"></i></a></li>
													<li><a target="_blank" title="Facebook" href="#" class="facebook social-icon"><i class="zmdi zmdi-facebook"></i></a></li>
													<li><a target="_blank" title="LinkedIn" href="#" class="linkedin social-icon"><i class="zmdi zmdi-linkedin"></i></a></li>
												</ul>
											</div>
										</div>
									</div><!-- .product-info -->
								</div><!-- .modal-product -->
							</div><!-- .modal-body -->
						</div><!-- .modal-content -->
					</div><!-- .modal-dialog -->
			   </div>
			   <!-- END Modal -->
			</div>
		<style>
			.swal2-popup{
				background-color: #ffffff93 !important;
				box-shadow: 0 0 0 0 black;
    backdrop-filter: blur(1rem) !important;
    border-radius: 12px !important;
}
.swal2-success-circular-line-left{
	display: none;
}
.swal2-success-circular-line-right{
	display: none;
}
.swal2-success-fix{
	display: none;
}
.swal2-timer-progress-bar{
	border-radius: 20px;
    background-color: #b79bb263;
}
			
		</style>	<!-- END QUICKVIEW PRODUCT -->	
			
		</div>
		<!-- WRAPPER END -->
		<script>
				function Wishlist(productId,e){
					const icon=e.querySelector('i')
				fetch('/wishlist', {
				method: "post",
					headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify({ productId})
			}).then(res=> res.json())
			.then((data)=>{
				if(data.succ){
					icon.classList.remove('ri-heart-3-line')
					icon.classList.add('ri-heart-3-fill')
					const Toast = Swal.mixin({

						toast: true,
						position: "bottom",
						showConfirmButton: false,
						timer: 3000,
						timerProgressBar: true,

						didOpen: (toast) => {
							toast.onmouseenter = Swal.stopTimer;
							toast.onmouseleave = Swal.resumeTimer;
						}
						});

						Toast.fire({

						icon: "success",
						title: "Added to your Wishlist"

						});
				}else if(data.fail){
					icon.classList.add('ri-heart-3-line')
					icon.classList.remove('ri-heart-3-fill')
					const Toast = Swal.mixin({

							toast: true,
							position: "bottom",
							showConfirmButton: false,
							timer: 3000,
							timerProgressBar: true,

							didOpen: (toast) => {

								toast.onmouseenter = Swal.stopTimer;
								toast.onmouseleave = Swal.resumeTimer;
							}

							});

							Toast.fire({

							icon: "success",
							title: "Removed from your Wishlist"

							});
				}
			})
			}


			function addcart(id) {
			const quantity = 1
			fetch('/addtocart', {
				method: "POST",
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify({ id, quantity })
			}).then(res => res.json())

				.then(data => {

					if (data.succ) {
						cartAction();
						const Toast = Swal.mixin({

							toast: true,
							position: "bottom",
							showConfirmButton: false,
							timer: 3000,
							timerProgressBar: true,

							didOpen: (toast) => {
								toast.onmouseenter = Swal.stopTimer;
								toast.onmouseleave = Swal.resumeTimer;
							}
						});

						Toast.fire({

							icon: "success",
							title: "Added TO Cart"

						});

					} else if (data.fail) {

						const Toast = Swal.mixin({

							toast: true,
							position: "bottom",
							showConfirmButton: false,
							timer: 3000,
							timerProgressBar: true,

							didOpen: (toast) => {

								toast.onmouseenter = Swal.stopTimer;
								toast.onmouseleave = Swal.resumeTimer;
							}

						});

						Toast.fire({

							icon: "warning",
							title: "Already Added"

						});

					}


				})
		}



		</script>
		
<%- include('../layouts/user/lyFooter.ejs') %>